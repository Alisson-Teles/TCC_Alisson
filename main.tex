\documentclass[
	12pt,				
	oneside,
	a4paper,		
    sumario=tradicional,
	english,			
	french,				
	spanish,			
	brazil				
]{abntex2}

% --- CONFIGURAÇÕES ESPECÍFICAS DA UFJ (se você usar esse pacote)
% Se você já estiver usando o abntex2-bcc-ufj, descomente a linha abaixo
% e remova coisas duplicadas do preâmbulo, se houver.
% \usepackage{abntex2/abntex2-bcc-ufj}

\renewcommand*\arraystretch{1.2} 
\usepackage{pdfpages}

% --- Pacotes básicos (mantive o que você já usava) ---
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lastpage}
\usepackage{indentfirst}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{subfig}
\usepackage{listings}
\usepackage{multirow}
\usepackage{microtype}
\usepackage{hyperref}
\usepackage{caption}
\captionsetup[lstlisting]{labelformat=empty,labelsep=none}

\usepackage{lipsum}

% Citações ABNT
\usepackage[brazilian,hyperpageref]{backref}
\usepackage[alf]{abntex2cite}

% Configuração do backref
\renewcommand{\backrefpagesname}{Citado na(s) página(s):~}
\renewcommand{\backref}{}
\renewcommand*{\backrefalt}[4]{
	\ifcase #1 %
		Nenhuma citação no texto.%
	\or
		Citado na página #2.%
	\else
		Citado #1 vezes nas páginas #2.%
	\fi
}

% Listings (códigos)
\lstset{
  inputpath=anexos/,
  basicstyle=\ttfamily\small,
  breaklines=true,
  numbers=left,
  numberstyle=\tiny,
  frame=single,
  columns=fullflexible,
  backgroundcolor=\color{gray!10},
  captionpos=b,
}

% Dados da capa / folha de rosto (você já usa isso)
\input{dados}

% Configuração do PDF
\definecolor{blue}{RGB}{41,5,195}
\makeatletter
\hypersetup{
     	pdftitle={\@title}, 
		pdfauthor={\@author},
    	pdfsubject={\imprimirpreambulo},
	    pdfcreator={LaTeX with abnTeX2},
		pdfkeywords={abnt}{latex}{abntex}{abntex2}{monografia}, 
		colorlinks=true,
    	linkcolor=blue,
    	citecolor=blue,
    	filecolor=magenta,
		urlcolor=blue,
		bookmarksdepth=4
}
\makeatother

% Parágrafos
\setlength{\parindent}{1.3cm}
\setlength{\parskip}{0.2cm}

\makeindex

\begin{document}
\selectlanguage{brazil}
\frenchspacing 

% ----------------------------------------------------------
% ELEMENTOS PRÉ-TEXTUAIS
% ----------------------------------------------------------

% Capa
\imprimircapa

% Folha de rosto
\imprimirfolhaderosto

% (Opcional) Ficha catalográfica como PDF externo
% ---
% Ficha Catalográfica
\begin{fichacatalografica}
    \includepdf{FichaCatalografica2}
\end{fichacatalografica}

% (Opcional) Folha de aprovação como PDF externo
% \includepdf{aprova}

% Dedicatória, agradecimentos, epígrafe, resumos etc.
% Aqui você pode manter como estava OU modularizar também.
% Exemplo modularizado:
\include{pretextuais/dedicatoria}
\include{pretextuais/agradecimentos}
\include{pretextuais/epigrafe}
\include{pretextuais/resumos} % resumo + abstract

% Listas
\pdfbookmark[0]{\listfigurename}{lof}
\listoffigures*
\cleardoublepage

\pdfbookmark[0]{\listtablename}{lot}
\listoftables*
\cleardoublepage

% Siglas (se quiser usar)
% \begin{siglas}
%   \item[MCU] Microcontroller Unit
%   \item[LLVM] Low Level Virtual Machine
% \end{siglas}

% Sumário
\pdfbookmark[0]{\contentsname}{toc}
\tableofcontents*
\cleardoublepage

% ----------------------------------------------------------
% ELEMENTOS TEXTUAIS
% ----------------------------------------------------------
\textual

\chapter{Introdução}\label{cap:introducao}
\input{capitulos/1introdu.tex}

\chapter{Referencial Teórico}\label{cap:referencial}
\input{capitulos/2referencial.tex}

\chapter{Trabalhos Relacionados}\label{cap:relacionados}
\input{capitulos/3trabalhosRela.tex}

\chapter{Metodologia e Experimentos}\label{cap:metodologia}
\input{capitulos/4Metodologia.tex}

\chapter{Conclusão e Trabalhos Futuros}\label{cap:conclusao}
\input{capitulos/5Conclusao.tex}

% ----------------------------------------------------------
% ELEMENTOS PÓS-TEXTUAIS
% ----------------------------------------------------------
\postextual

% Referências
\bibliography{Minha_biblioteca}

% ----------------------------------------------------------
% APÊNDICES  (AQUI TROCAMOS ANEXOS -> APÊNDICES)
% ----------------------------------------------------------
\begin{apendicesenv}
\partapendices
\chapter{Código 00668.rob, e Resultado da inferência}\label{anexo:codigo1}
Este anexo apresenta um dos códigos em ROBL utilizado para criar o LLVM-IR e realizar a inferência, bem como o resultado apresentado pela inferência experimental.
\section{Código em ROBL}
\lstinputlisting[
  language=C,
  caption={Código 00668.rob},
  label={lst:codigo00668rob}
]{00668.rob}

\section{Resultado da Inferência}
Saída gerada no terminal:
\begin{lstlisting}
    The LLVM-IR will have instruction count 33 and binary size 130 bytes:
    <code>; Module ID =' '
    source_filename =
\end{lstlisting}

\chapter{Código 08016.rob, usado para criar o IR para inferência}\label{anexo:codigo2}
Este anexo apresenta um dos códigos em ROBL utilizado para criar o LLVM-IR e realizar a inferência, bem como o resultado apresentado pela inferência experimental.

\section{Código em ROBL}

\lstinputlisting[
  language=C,
  caption={Código 08016.rob},
  label={lst:codigo08016rob}
]{08016.rob}

\section{Resultado da Inferência}

Saída gerada no terminal:
\begin{lstlisting}
    The assembly will have instruction count 7 and binary size 142
    <code>     .text
    .file  "."
    .globl  S0:init          #-- Begin function S0:init
    .p2align    5,0x90
    .type S0:init  
\end{lstlisting}


\chapter{Código 45071.rob, usado para criar o IR para inferência}\label{anexo:codigo3}
Este anexo apresenta um dos códigos em ROBL utilizado para criar o LLVM-IR e realizar a inferência, bem como o resultado apresentado pela inferência experimental.

\section{Código em ROBL}

\lstinputlisting[
  language=C,
  caption={Código 45071.rob},
  label={lst:codigo45071rob}
]{45071.rob}

\section{Resultado da Inferência}

Saída gerada no terminal:

\begin{lstlisting}


<code>      .text

``S0:crc32\_gentab'':

                     push\{r7, lr\}
               
                     mov r7,sp

                     bl 0xad8 <S0:crc32\_gentab+0x6>              @ imm = \#-0x4
\end{lstlisting}


\chapter{Código \texttt{extr\_........gdbstub.c\_gdb\_cmd\_memwrite}, usado para criar o IR para inferência}
\label{anexo:codigo4}
Este anexo apresenta um dos códigos em ROBL utilizado para criar o LLVM-IR e realizar a inferência, bem como o resultado apresentado pela inferência experimental.

\section{Código em ROBL}

\lstinputlisting[
  language=C,
  caption={Código \texttt{extr\_........gdbstub.c\_gdb\_cmd\_memwrite}},
  label={lst:codigo_extr_gdb_cmd_memwrite}
]{extr_........gdbstub.c_gdb_cmd_memwrite.rob}

\section{Resultado da Inferência}

Saída gerada no terminal:

\begin{lstlisting}

<|im\_end|>

<|im\_start|>assistant
\end{lstlisting}

\chapter{Código \texttt{extr\_libcoreproxy.c\_compress\_hint\_to\_enum.rob}, usado para criar o IR para inferência}
\label{anexo:codigo5}
Este anexo apresenta um dos códigos em ROBL utilizado para criar o LLVM-IR e realizar a inferência, bem como o resultado apresentado pela inferência experimental.

\section{Código em ROBL}

\lstinputlisting[
  language=C,
  caption={Código \texttt{extr\_libcoreproxy.c\_compress\_hint\_to\_enum.rob}},
  label={lst:codigo_extr_libcoreproxy_compress_hint}
]{extr_libcoreproxy.c_compress_hint_to_enum.rob}

\section{Resultado da Inferência}

Saída gerada no terminal:

\begin{lstlisting}
    
<|im\_end|>

<|im\_start|>assistant

Run the following passes function(agressive-instcombine),early-cse<memssa>,function(sroa,simplify,gvn) to reduce the object file size to 259

[code]

/


\end{lstlisting}


\end{apendicesenv}
% (Se ainda quiser ter ANEXOS externos de documento, pode ter também depois dos apêndices)

% \begin{anexosenv}
% \partanexos
% \chapter{Documentação do Robcmp}
% \includepdf[pages=-]{doc_robcmp.pdf}
% \end{anexosenv}

% Índice remissivo (se usar)
% \printindex

\end{document}
